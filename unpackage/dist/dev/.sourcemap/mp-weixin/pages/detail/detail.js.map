{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\" v-if=\"product\">\r\n\t\t<!-- 商品圖片 -->\r\n\t\t<swiper class=\"product-images\" indicator-dots autoplay circular>\r\n\t\t\t<swiper-item v-for=\"(image, index) in product.images\" :key=\"index\">\r\n\t\t\t\t<image :src=\"image\" mode=\"aspectFill\" class=\"product-image\"></image>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t\r\n\t\t<!-- 商品信息 -->\r\n\t\t<view class=\"product-info\">\r\n\t\t\t<text class=\"product-name\">{{product.name}}</text>\r\n\t\t\t<text class=\"product-price\">¥{{selectedSku.price}}万</text>\r\n\t\t\t<text class=\"product-desc\">{{product.description}}</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 商品規格 -->\r\n\t\t<view class=\"sku-section\">\r\n\t\t\t<view class=\"section-title\">商品规格</view>\r\n\t\t\t<view class=\"sku-list\">\r\n\t\t\t\t<view class=\"sku-item\" v-for=\"(sku, index) in product.skus\" :key=\"index\" \r\n\t\t\t\t\t:class=\"{ active: selectedSku.id === sku.id }\"\r\n\t\t\t\t\t@tap=\"selectSku(sku)\">\r\n\t\t\t\t\t<text>{{sku.name}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 商品特點 -->\r\n\t\t<view class=\"features-section\">\r\n\t\t\t<view class=\"section-title\">商品特点</view>\r\n\t\t\t<view class=\"features-list\">\r\n\t\t\t\t<view class=\"feature-item\" v-for=\"(feature, index) in selectedSku.features\" :key=\"index\">\r\n\t\t\t\t\t<text>{{feature}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部操作欄 -->\r\n\t\t<view class=\"bottom-bar\">\r\n\t\t\t<view class=\"left\">\r\n\t\t\t\t<view class=\"icon-btn\" @tap=\"goToMenu\">\r\n\t\t\t\t\t<image src=\"/static/tabs/home.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t<text>首页</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"icon-btn\" @tap=\"goToUser\">\r\n\t\t\t\t\t<image src=\"/static/tabs/user.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t<text>我的</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"right\">\r\n\t\t\t\t<button class=\"bargain-btn\" @tap=\"startBargain\">砍价</button>\r\n\t\t\t\t<button class=\"buy-btn\" @tap=\"buyNow\">立即购买</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport userData from '@/utils/user.js'\r\n\timport products from '@/utils/products.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tproduct: null,\r\n\t\t\t\tselectedSku: null,\r\n\t\t\t\tuserBalance: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\t// console.log('详情页参数：', options)\r\n\t\t\tthis.product = products.getProductById(options.id)\r\n\t\t\t// console.log('获取到的商品数据：', this.product)\r\n\t\t\tif (!this.product) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '商品不存在',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t}, 1500)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.selectedSku = this.product.skus[0]\r\n\t\t\tthis.userBalance = userData.getUserInfo().balance / 10000\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tselectSku(sku) {\r\n\t\t\t\tthis.selectedSku = sku\r\n\t\t\t},\r\n\t\t\tstartBargain() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/bargain/bargain?id=' + this.product.id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbuyNow() {\r\n\t\t\t\tif (this.userBalance < this.selectedSku.price) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '余额不足',\r\n\t\t\t\t\t\tcontent: '您的账户余额不足，请继续努力',\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tconfirmText: '好的',\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 创建订单\r\n\t\t\t\tconst order = {\r\n\t\t\t\t\tid: Date.now(),\r\n\t\t\t\t\tproductId: this.product.id,\r\n\t\t\t\t\tproductName: this.product.name,\r\n\t\t\t\t\tproductImage: this.product.images[0],\r\n\t\t\t\t\t// image: this.product.image,\r\n\t\t\t\t\tsku: this.selectedSku,\r\n\t\t\t\t\tprice: this.selectedSku.price,\r\n\t\t\t\t\tstatus: '待付款',\r\n\t\t\t\t\tcreateTime: new Date().toISOString()\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(this.product.images[0])\r\n\t\t\t\t\r\n\t\t\t\t// 更新用户余额\r\n\t\t\t\tuserData.updateBalance(-this.selectedSku.price * 10000)\r\n\t\t\t\t// 添加订单\r\n\t\t\t\tuserData.addOrder(order)\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '订单',\r\n\t\t\t\t\tcontent: '已提交订单，请前往订单页面付款',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '好的'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \tuni.navigateBack()\r\n\t\t\t\t// }, 1500)\r\n\t\t\t},\r\n\t\t\tgoToBargain() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/bargain/bargain?id=' + this.product.id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoToMenu() {\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoToUser() {\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/user/user'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tpadding-bottom: 120rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\t\r\n\t.product-images {\r\n\t\twidth: 100%;\r\n\t\theight: 600rpx;\r\n\t}\r\n\t\r\n\t.product-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.product-info {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.product-name {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #1a1a1a;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.product-price {\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #FF4D4F;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.product-desc {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\t\r\n\t.sku-section, .features-section {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.section-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #1a1a1a;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.sku-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.sku-item {\r\n\t\tpadding: 10rpx 30rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.sku-item.active {\r\n\t\tbackground-color: #FF4D4F;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n\t.features-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.feature-item {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tpadding: 10rpx 0;\r\n\t\tborder-bottom: 1rpx solid #f5f5f5;\r\n\t}\r\n\t\r\n\t.feature-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t.bottom-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 100rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 30rpx;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.bottom-bar .left {\r\n\t\tdisplay: flex;\r\n\t\tgap: 40rpx;\r\n\t}\r\n\t\r\n\t.icon-btn {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.icon-btn image {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\t\r\n\t.icon-btn text {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.bottom-bar .right {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.bargain-btn, .buy-btn {\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tpadding: 0 40rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.bargain-btn {\r\n\t\tbackground-color: #FFA940;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n\t.buy-btn {\r\n\t\tbackground-color: #FF4D4F;\r\n\t\tcolor: #fff;\r\n\t}\r\n</style> ","import MiniProgramPage from 'D:/learnRoute/procedure/wechat-Pro-demo-1/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["products","uni","userData"],"mappings":";;;;;AA8DC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,aAAa;AAAA,MACb,aAAa;AAAA,IACd;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AAEf,SAAK,UAAUA,eAAAA,SAAS,eAAe,QAAQ,EAAE;AAEjD,QAAI,CAAC,KAAK,SAAS;AAClBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,OACN;AACD,iBAAW,MAAM;AAChBA,sBAAAA,MAAI,aAAa;AAAA,MACjB,GAAE,IAAI;AACP;AAAA,IACD;AACA,SAAK,cAAc,KAAK,QAAQ,KAAK,CAAC;AACtC,SAAK,cAAcC,WAAAA,SAAS,YAAa,EAAC,UAAU;AAAA,EACpD;AAAA,EACD,SAAS;AAAA,IACR,UAAU,KAAK;AACd,WAAK,cAAc;AAAA,IACnB;AAAA,IACD,eAAe;AACdD,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,QAAQ;AAAA,OACjD;AAAA,IACD;AAAA,IACD,SAAS;AACR,UAAI,KAAK,cAAc,KAAK,YAAY,OAAO;AAC9CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,SACb;AACD;AAAA,MACD;AAGA,YAAM,QAAQ;AAAA,QACb,IAAI,KAAK,IAAK;AAAA,QACd,WAAW,KAAK,QAAQ;AAAA,QACxB,aAAa,KAAK,QAAQ;AAAA,QAC1B,cAAc,KAAK,QAAQ,OAAO,CAAC;AAAA;AAAA,QAEnC,KAAK,KAAK;AAAA,QACV,OAAO,KAAK,YAAY;AAAA,QACxB,QAAQ;AAAA,QACR,aAAY,oBAAI,KAAM,GAAC,YAAY;AAAA,MACpC;AAIAC,iBAAQ,SAAC,cAAc,CAAC,KAAK,YAAY,QAAQ,GAAK;AAEtDA,iBAAQ,SAAC,SAAS,KAAK;AAEvBD,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,aAAa;AAAA,OACb;AAAA,IAKD;AAAA,IACD,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,QAAQ;AAAA,OACjD;AAAA,IACD;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJD,GAAG,WAAW,eAAe;"}