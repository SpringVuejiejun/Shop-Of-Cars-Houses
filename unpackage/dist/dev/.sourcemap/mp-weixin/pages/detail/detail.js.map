{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\n\t<view class=\"container\" v-if=\"product\">\n\t\t<!-- 商品圖片 -->\n\t\t<swiper class=\"product-images\" indicator-dots autoplay circular>\n\t\t\t<swiper-item v-for=\"(image, index) in product.images\" :key=\"index\">\n\t\t\t\t<image :src=\"image\" mode=\"aspectFill\" class=\"product-image\"></image>\n\t\t\t</swiper-item>\n\t\t</swiper>\n\t\t\n\t\t<!-- 商品信息 -->\n\t\t<view class=\"product-info\">\n\t\t\t<text class=\"product-name\">{{product.name}}</text>\n\t\t\t<text class=\"product-price\">¥{{selectedSku.price}}万</text>\n\t\t\t<text class=\"product-desc\">{{product.description}}</text>\n\t\t</view>\n\t\t\n\t\t<!-- 商品規格 -->\n\t\t<view class=\"sku-section\">\n\t\t\t<view class=\"section-title\">商品规格</view>\n\t\t\t<view class=\"sku-list\">\n\t\t\t\t<view class=\"sku-item\" v-for=\"(sku, index) in product.skus\" :key=\"index\" \n\t\t\t\t\t:class=\"{ active: selectedSku.id === sku.id }\"\n\t\t\t\t\t@tap=\"selectSku(sku)\">\n\t\t\t\t\t<text>{{sku.name}}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 商品特點 -->\n\t\t<view class=\"features-section\">\n\t\t\t<view class=\"section-title\">商品特点</view>\n\t\t\t<view class=\"features-list\">\n\t\t\t\t<view class=\"feature-item\" v-for=\"(feature, index) in selectedSku.features\" :key=\"index\">\n\t\t\t\t\t<text>{{feature}}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 底部操作欄 -->\n\t\t<view class=\"bottom-bar\">\n\t\t\t<view class=\"left\">\n\t\t\t\t<view class=\"icon-btn\" @tap=\"goToMenu\">\n\t\t\t\t\t<image src=\"/static/tabs/home.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>首页</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"icon-btn\" @tap=\"goToUser\">\n\t\t\t\t\t<image src=\"/static/tabs/user.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>我的</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"right\">\n\t\t\t\t<button class=\"bargain-btn\" @tap=\"startBargain\">砍价</button>\n\t\t\t\t<button class=\"buy-btn\" @tap=\"buyNow\">立即购买</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport userData from '@/utils/user.js'\n\timport products from '@/utils/products.js'\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tproduct: null,\n\t\t\t\tselectedSku: null,\n\t\t\t\tuserBalance: 0\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\t// console.log('详情页参数：', options)\n\t\t\tthis.product = products.getProductById(options.id)\n\t\t\t// console.log('获取到的商品数据：', this.product)\n\t\t\tif (!this.product) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '商品不存在',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 1500)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.selectedSku = this.product.skus[0]\n\t\t\tthis.userBalance = userData.getUserInfo().balance / 10000\n\t\t},\n\t\tmethods: {\n\t\t\tselectSku(sku) {\n\t\t\t\tthis.selectedSku = sku\n\t\t\t},\n\t\t\tstartBargain() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/bargain/bargain?id=' + this.product.id\n\t\t\t\t})\n\t\t\t},\n\t\t\tbuyNow() {\n\t\t\t\tif (this.userBalance < this.selectedSku.price) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '余额不足',\n\t\t\t\t\t\tcontent: '您的账户余额不足，请继续努力',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tconfirmText: '好的',\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 创建订单\n\t\t\t\tconst order = {\n\t\t\t\t\tid: Date.now(),\n\t\t\t\t\tproductId: this.product.id,\n\t\t\t\t\tproductName: this.product.name,\n\t\t\t\t\tproductImage: this.product.images[0],\n\t\t\t\t\t// image: this.product.image,\n\t\t\t\t\tsku: this.selectedSku,\n\t\t\t\t\tprice: this.selectedSku.price,\n\t\t\t\t\tstatus: '待付款',\n\t\t\t\t\tcreateTime: new Date().toISOString()\n\t\t\t\t}\n\t\t\t\t// console.log(this.product.images[0])\n\t\t\t\t\n\t\t\t\t// 更新用户余额\n\t\t\t\tuserData.updateBalance(-this.selectedSku.price * 10000)\n\t\t\t\t// 添加订单\n\t\t\t\tuserData.addOrder(order)\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '订单',\n\t\t\t\t\tcontent: '已提交订单，请前往订单页面付款',\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '好的'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tuni.navigateBack()\n\t\t\t\t// }, 1500)\n\t\t\t},\n\t\t\tgoToBargain() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/bargain/bargain?id=' + this.product.id\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoToMenu() {\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoToUser() {\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: '/pages/user/user'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\tpadding-bottom: 120rpx;\n\t\tbackground-color: #f5f5f5;\n\t\tmin-height: 100vh;\n\t}\n\t\n\t.product-images {\n\t\twidth: 100%;\n\t\theight: 600rpx;\n\t}\n\t\n\t.product-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t\n\t.product-info {\n\t\tbackground-color: #fff;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.product-name {\n\t\tfont-size: 36rpx;\n\t\tcolor: #1a1a1a;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 20rpx;\n\t\tdisplay: block;\n\t}\n\t\n\t.product-price {\n\t\tfont-size: 48rpx;\n\t\tcolor: #FF4D4F;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 20rpx;\n\t\tdisplay: block;\n\t}\n\t\n\t.product-desc {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t\tline-height: 1.5;\n\t}\n\t\n\t.sku-section, .features-section {\n\t\tbackground-color: #fff;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.section-title {\n\t\tfont-size: 32rpx;\n\t\tcolor: #1a1a1a;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.sku-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.sku-item {\n\t\tpadding: 10rpx 30rpx;\n\t\tbackground-color: #f5f5f5;\n\t\tborder-radius: 8rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\t\n\t.sku-item.active {\n\t\tbackground-color: #FF4D4F;\n\t\tcolor: #fff;\n\t}\n\t\n\t.features-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.feature-item {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t\tpadding: 10rpx 0;\n\t\tborder-bottom: 1rpx solid #f5f5f5;\n\t}\n\t\n\t.feature-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\t\n\t.bottom-bar {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 100rpx;\n\t\tbackground-color: #fff;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 0 30rpx;\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\t\n\t.bottom-bar .left {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t}\n\t\n\t.icon-btn {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\t\n\t.icon-btn image {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tmargin-bottom: 6rpx;\n\t}\n\t\n\t.icon-btn text {\n\t\tfont-size: 20rpx;\n\t\tcolor: #666;\n\t}\n\t\n\t.bottom-bar .right {\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.bargain-btn, .buy-btn {\n\t\theight: 80rpx;\n\t\tline-height: 80rpx;\n\t\tpadding: 0 40rpx;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t.bargain-btn {\n\t\tbackground-color: #FFA940;\n\t\tcolor: #fff;\n\t}\n\t\n\t.buy-btn {\n\t\tbackground-color: #FF4D4F;\n\t\tcolor: #fff;\n\t}\n</style> ","import MiniProgramPage from 'D:/learnRoute/procedure/wechat-Pro-demo-1/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["products","uni","userData"],"mappings":";;;;;AA8DC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,aAAa;AAAA,MACb,aAAa;AAAA,IACd;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AAEf,SAAK,UAAUA,eAAAA,SAAS,eAAe,QAAQ,EAAE;AAEjD,QAAI,CAAC,KAAK,SAAS;AAClBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,OACN;AACD,iBAAW,MAAM;AAChBA,sBAAAA,MAAI,aAAa;AAAA,MACjB,GAAE,IAAI;AACP;AAAA,IACD;AACA,SAAK,cAAc,KAAK,QAAQ,KAAK,CAAC;AACtC,SAAK,cAAcC,WAAAA,SAAS,YAAa,EAAC,UAAU;AAAA,EACpD;AAAA,EACD,SAAS;AAAA,IACR,UAAU,KAAK;AACd,WAAK,cAAc;AAAA,IACnB;AAAA,IACD,eAAe;AACdD,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,QAAQ;AAAA,OACjD;AAAA,IACD;AAAA,IACD,SAAS;AACR,UAAI,KAAK,cAAc,KAAK,YAAY,OAAO;AAC9CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,SACb;AACD;AAAA,MACD;AAGA,YAAM,QAAQ;AAAA,QACb,IAAI,KAAK,IAAK;AAAA,QACd,WAAW,KAAK,QAAQ;AAAA,QACxB,aAAa,KAAK,QAAQ;AAAA,QAC1B,cAAc,KAAK,QAAQ,OAAO,CAAC;AAAA;AAAA,QAEnC,KAAK,KAAK;AAAA,QACV,OAAO,KAAK,YAAY;AAAA,QACxB,QAAQ;AAAA,QACR,aAAY,oBAAI,KAAM,GAAC,YAAY;AAAA,MACpC;AAIAC,iBAAQ,SAAC,cAAc,CAAC,KAAK,YAAY,QAAQ,GAAK;AAEtDA,iBAAQ,SAAC,SAAS,KAAK;AAEvBD,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,aAAa;AAAA,OACb;AAAA,IAKD;AAAA,IACD,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,QAAQ;AAAA,OACjD;AAAA,IACD;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJD,GAAG,WAAW,eAAe;"}