{"version":3,"file":"address.js","sources":["pages/address/address.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy9hZGRyZXNzLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 地址列表 -->\n\t\t<view class=\"address-list\">\n\t\t\t<view class=\"address-item\" v-for=\"(item, index) in addressList\" :key=\"index\">\n\t\t\t\t<view class=\"address-info\">\n\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t<text class=\"name\">{{item.name}}</text>\n\t\t\t\t\t\t<text class=\"phone\">{{item.phone}}</text>\n\t\t\t\t\t\t<text class=\"default-tag\" v-if=\"item.isDefault\">默认</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"address-detail\">\n\t\t\t\t\t\t<text>{{item.province}}{{item.city}}{{item.district}}{{item.detail}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"address-actions\">\n\t\t\t\t\t<view class=\"action-item\" @tap=\"setDefault(index)\">\n\t\t\t\t\t\t<image :src=\"item.isDefault ? 'https://img.picui.cn/free/2025/05/09/681e034c3cc49.jpg' : '/static/images/unchecked.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<text>设为默认</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"action-item\" @tap=\"editAddress(index)\">\n\t\t\t\t\t\t<image src=\"https://img.picui.cn/free/2025/05/09/681e034c3cc49.jpg\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<text>编辑</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"action-item\" @tap=\"deleteAddress(index)\">\n\t\t\t\t\t\t<image src=\"https://img.picui.cn/free/2025/05/09/681e034c3cc49.jpg\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<text>删除</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 添加地址按钮 -->\n\t\t<view class=\"add-btn\" @tap=\"addAddress\">\n\t\t\t<text>+ 添加新地址</text>\n\t\t</view>\n\t\t\n\t\t<!-- 地址编辑弹窗 -->\n\t\t<uni-popup ref=\"addressPopup\" type=\"bottom\">\n\t\t\t<view class=\"address-form\">\n\t\t\t\t<view class=\"form-title\">{{isEdit ? '编辑地址' : '添加地址'}}</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">收货人</text>\n\t\t\t\t\t<input type=\"text\" v-model=\"formData.name\" placeholder=\"请输入收货人姓名\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">手机号码</text>\n\t\t\t\t\t<input type=\"number\" v-model=\"formData.phone\" placeholder=\"请输入手机号码\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">所在地区</text>\n\t\t\t\t\t<picker mode=\"region\" :value=\"region\" @change=\"handleRegionChange\">\n\t\t\t\t\t\t<view class=\"picker\">\n\t\t\t\t\t\t\t<text>{{region[0] || '请选择'}} {{region[1] || ''}} {{region[2] || ''}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</picker>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">详细地址</text>\n\t\t\t\t\t<textarea v-model=\"formData.detail\" placeholder=\"请输入详细地址\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<view class=\"default-switch\">\n\t\t\t\t\t\t<text>设为默认地址</text>\n\t\t\t\t\t\t<switch :checked=\"formData.isDefault\" @change=\"handleDefaultChange\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-buttons\">\n\t\t\t\t\t<button class=\"cancel-btn\" @tap=\"closePopup\">取消</button>\n\t\t\t\t\t<button class=\"confirm-btn\" @tap=\"saveAddress\">保存</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script>\n\timport userData from '@/utils/user.js'\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\taddressList: [],\n\t\t\t\tisEdit: false,\n\t\t\t\teditIndex: -1,\n\t\t\t\tformData: {\n\t\t\t\t\tname: '',\n\t\t\t\t\tphone: '',\n\t\t\t\t\tprovince: '',\n\t\t\t\t\tcity: '',\n\t\t\t\t\tdistrict: '',\n\t\t\t\t\tdetail: '',\n\t\t\t\t\tisDefault: false,\n\t\t\t\t\tid:''\n\t\t\t\t},\n\t\t\t\tregion: []\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.loadAddressList()\n\t\t},\n\t\tonShow() {\n\t\t\tthis.loadAddressList()\n\t\t},\n\t\tmethods: {\n\t\t\tloadAddressList() {\n\t\t\t\tconst list = userData.getAddressList()\n\t\t\t\tthis.addressList = [...list]\n\t\t\t},\n\t\t\taddAddress() {\n\t\t\t\tthis.isEdit = false\n\t\t\t\tthis.editIndex = -1\n\t\t\t\tthis.formData = {\n\t\t\t\t\tname: '',\n\t\t\t\t\tphone: '',\n\t\t\t\t\tprovince: '',\n\t\t\t\t\tcity: '',\n\t\t\t\t\tdistrict: '',\n\t\t\t\t\tdetail: '',\n\t\t\t\t\tisDefault: false,\n\t\t\t\t\tid: 'A' + Date.now()\n\t\t\t\t}\n\t\t\t\tthis.region = []\n\t\t\t\tthis.$refs.addressPopup.open()\n\t\t\t},\n\t\t\teditAddress(index) {\n\t\t\t\tthis.isEdit = true\n\t\t\t\tthis.editIndex = index\n\t\t\t\tconst address = this.addressList[index]\n\t\t\t\tthis.formData = { ...address }\n\t\t\t\tthis.region = [address.province, address.city, address.district]\n\t\t\t\tthis.$refs.addressPopup.open()\n\t\t\t},\n\t\t\tdeleteAddress(index) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要删除这个地址吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tconst addressId = this.addressList[index].id\n\t\t\t\t\t\t\tconst updatedList = userData.deleteAddress(addressId)\n\t\t\t\t\t\t\tthis.addressList = [...updatedList]\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tsetDefault(index) {\n\t\t\t\tuserData.setDefaultAddress(this.addressList[index].id)\n\t\t\t\tconst updatedList = userData.getAddressList()\n\t\t\t\tthis.addressList = [...updatedList]\n\t\t\t},\n\t\t\thandleRegionChange(e) {\n\t\t\t\tthis.region = e.detail.value\n\t\t\t\tthis.formData.province = e.detail.value[0]\n\t\t\t\tthis.formData.city = e.detail.value[1]\n\t\t\t\tthis.formData.district = e.detail.value[2]\n\t\t\t},\n\t\t\thandleDefaultChange(e) {\n\t\t\t\tthis.formData.isDefault = e.detail.value\n\t\t\t},\n\t\t\tclosePopup() {\n\t\t\t\tthis.$refs.addressPopup.close()\n\t\t\t},\n\t\t\tsaveAddress() {\n\t\t\t\tif (!this.formData.name) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请输入收货人姓名',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (!this.formData.phone) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请输入手机号码',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (!this.formData.detail) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请输入详细地址',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\tthis.formData.id = this.addressList[this.editIndex].id\n\t\t\t\t\tconst updatedList = userData.updateAddress(this.formData)\n\t\t\t\t\tthis.addressList = [...updatedList]\n\t\t\t\t} else {\n\t\t\t\t\tconst newList = userData.addAddress(this.formData)\n\t\t\t\t\tthis.addressList = [...newList]\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 關閉彈窗\n\t\t\t\tthis.closePopup()\n\t\t\t\t\n\t\t\t\t// 顯示保存成功提示\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\tpadding: 20rpx;\n\t\tbackground-color: #f5f5f5;\n\t\tmin-height: 100vh;\n\t}\n\t\n\t.address-list {\n\t\tmargin-bottom: 120rpx;\n\t}\n\t\n\t.address-item {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.user-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.name {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tfont-weight: bold;\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.phone {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\t\n\t.default-tag {\n\t\tfont-size: 24rpx;\n\t\tcolor: #FF4D4F;\n\t\tbackground-color: rgba(255, 77, 79, 0.1);\n\t\tpadding: 4rpx 12rpx;\n\t\tborder-radius: 4rpx;\n\t\tmargin-left: 20rpx;\n\t}\n\t\n\t.address-detail {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t\tline-height: 1.5;\n\t}\n\t\n\t.address-actions {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: 20rpx;\n\t\tpadding-top: 20rpx;\n\t\tborder-top: 1rpx solid #f5f5f5;\n\t}\n\t\n\t.action-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-left: 40rpx;\n\t}\n\t\n\t.action-item image {\n\t\twidth: 32rpx;\n\t\theight: 32rpx;\n\t\tmargin-right: 8rpx;\n\t}\n\t\n\t.action-item text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t}\n\t\n\t.add-btn {\n\t\tposition: fixed;\n\t\tbottom: 40rpx;\n\t\tleft: 40rpx;\n\t\tright: 40rpx;\n\t\theight: 80rpx;\n\t\tline-height: 80rpx;\n\t\tbackground-color: #FF4D4F;\n\t\tcolor: #fff;\n\t\ttext-align: center;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t.address-form {\n\t\tbackground-color: #fff;\n\t\tpadding: 30rpx;\n\t\tborder-radius: 20rpx;\n\t}\n\t\n\t.form-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t\ttext-align: center;\n\t}\n\t\n\t.form-item {\n\t\tmargin-bottom: 30rpx;\n\t}\n\t\n\t.label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tmargin-bottom: 10rpx;\n\t\tdisplay: block;\n\t}\n\t\n\tinput, textarea, .picker {\n\t\twidth: 100%;\n\t\theight: 80rpx;\n\t\tbackground-color: #f5f5f5;\n\t\tborder-radius: 8rpx;\n\t\tpadding: 0 20rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t}\n\t\n\ttextarea {\n\t\theight: 160rpx;\n\t\tpadding: 20rpx;\n\t}\n\t\n\t.default-switch {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.form-buttons {\n\t\tdisplay: flex;\n\t\tmargin-top: 40rpx;\n\t}\n\t\n\t.cancel-btn, .confirm-btn {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tline-height: 80rpx;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t\tmargin: 0 10rpx;\n\t}\n\t\n\t.cancel-btn {\n\t\tbackground-color: #f5f5f5;\n\t\tcolor: #666;\n\t}\n\t\n\t.confirm-btn {\n\t\tbackground-color: #FF4D4F;\n\t\tcolor: #fff;\n\t}\n</style> ","import MiniProgramPage from 'D:/learnRoute/procedure/wechat-Pro-demo-1/pages/address/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["userData","uni"],"mappings":"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"}